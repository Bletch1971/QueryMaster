{
  "WorkItem": {
    "AffectedComponent": {
      "Name": "",
      "DisplayName": ""
    },
    "ClosedComment": "",
    "ClosedDate": "2014-11-24T11:16:01.097-08:00",
    "CommentCount": 0,
    "Custom": null,
    "Description": "Hello there.\n\nFirst, wnat to say thanks for this library. This is very effective on C#.\n\nI'm trying to create an application for friends, which checks a few of our favorite servers every 30 seconds and notifies the various changes (new maps or new players).\n\nSometimes when I try using the method .GetPlayers() error occurs. \n\n_Index was outside the bounds of the byte array. \nin QueryMaster.Parser.ReadByte () \nin QueryMaster.Server.GetPlayers ()_\n\nwhat could be the problem?\nMay be the server has non-steam players?\nThanks.",
    "LastUpdatedDate": "2014-11-24T11:16:01.097-08:00",
    "PlannedForRelease": "",
    "ReleaseVisibleToPublic": false,
    "Priority": {
      "Name": "Unassigned",
      "Severity": 0,
      "Id": 0
    },
    "ProjectName": "querymaster",
    "ReportedDate": "2014-10-08T10:08:47.717-07:00",
    "Status": {
      "Name": "Closed",
      "Id": 4
    },
    "ReasonClosed": {
      "Name": "Unassigned"
    },
    "Summary": ".GetPlayers() method",
    "Type": {
      "Name": "Unassigned",
      "Id": 5
    },
    "VoteCount": 2,
    "Id": 1837
  },
  "FileAttachments": [],
  "Comments": [
    {
      "Message": "Hi,\nIts a strange error. Please use the updated (recommended ) version.\nNew version can get the received packets in case of exceptions.(read the release notes).\nadd it as a comment.(in hex format) ",
      "PostedDate": "2014-10-13T16:01:27.827-07:00",
      "Id": -2147483648
    },
    {
      "Message": "I made a simple project simulating connection to 3 servers every 10 seconds. The game is Zombie Panic Source. Sometimes the error occurs instantly, sometimes you have to wait a few minutes. (ie, first, all works well, then an error happens, and happens every next time). Sometimes error is like \"A2S_Player invalid header\" instead \"Index was outside the bounds of the byte array\". I also noticed that there is one player with an empty name. \nI attach error in the hex format (see .txt file)\nPlease see my code (it's very simple), maybe I'm doing something wrong.\n(I use VS2010 Express)\n[download ATTACH from dropbox](https://www.dropbox.com/s/kw9drnx1oh0h04c/GetPlayersError.rar?dl=0)\nThanks",
      "PostedDate": "2014-10-16T10:27:35.42-07:00",
      "Id": -2147483648
    },
    {
      "Message": "Hi,\n I analyzed the packet.\nyou are getting that error because the packet is incomplete/corrupt.\nAs per the protocol specifications,\n1st byte -> header('D' in case of player info.)\n2nd byte -> Number of players\nrest are chunks of data,each correspond to a player.(chunk count= 2nd byte)\r\n\r\nIn ur packet,\n2nd byte says ,  there are 23 players.\nbut there is only 22 chunks.\nso the parser continues to parse the missing 23rd chunk and it gives you \"Index was outside the bounds of the byte array\".\r\n\r\nAlso you reported that you sometimes get A2S_player invalid header.(also because of corrupt packet).\r\n\r\nSo this is not a bug in library.\r\n\r\nOne solution would be to wrap the getplayers() code within try block and return already parsed data from catch block.( but this would cause inconsistency.In your case,the returned data would have 22 players,but server may actually have 23 players.)\r\n\r\nAnother solution would be to wrap the call to getplayers() within try block and call it again from catch block \nand loop it till you get a valid packet.\n \r\n\r\n\nNote: _you can directly provide ip in string format to ServerQuery.GetServerInstance() method_",
      "PostedDate": "2014-10-17T05:49:32.697-07:00",
      "Id": -2147483648
    },
    {
      "Message": "",
      "PostedDate": "2014-11-24T11:16:01.097-08:00",
      "Id": -2147483648
    }
  ]
}